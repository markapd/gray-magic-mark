{"ast":null,"code":"import { Magic } from '@magic-sdk/admin';\nconst magic = new Magic(process.env.MAGIC_SECRET_KEY);\nexport default async function login(req, res) {\n  try {\n    const didToken = req.headers.authorization.substr(7);\n    await magic.token.validate(didToken);\n    res.status(200).json({\n      authenticated: true\n    });\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n}","map":{"version":3,"sources":["/Users/cody/MarkTraining/mark-magic-sample/pages/api/login.js"],"names":["Magic","magic","process","env","MAGIC_SECRET_KEY","login","req","res","didToken","headers","authorization","substr","token","validate","status","json","authenticated","error","message"],"mappings":"AAAA,SAASA,KAAT,QAAsB,kBAAtB;AAEA,MAAMC,KAAK,GAAG,IAAID,KAAJ,CAAUE,OAAO,CAACC,GAAR,CAAYC,gBAAtB,CAAd;AAEA,eAAe,eAAeC,KAAf,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+B;AAC5C,MAAI;AACF,UAAMC,QAAQ,GAAGF,GAAG,CAACG,OAAJ,CAAYC,aAAZ,CAA0BC,MAA1B,CAAiC,CAAjC,CAAjB;AACA,UAAMV,KAAK,CAACW,KAAN,CAAYC,QAAZ,CAAqBL,QAArB,CAAN;AACAD,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,aAAa,EAAE;AAAjB,KAArB;AACD,GAJD,CAIE,OAAOC,KAAP,EAAc;AACdV,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEE,MAAAA,KAAK,EAAEA,KAAK,CAACC;AAAf,KAArB;AACD;AACF","sourcesContent":["import { Magic } from '@magic-sdk/admin';\n\nconst magic = new Magic(process.env.MAGIC_SECRET_KEY);\n\nexport default async function login(req, res) {\n  try {\n    const didToken = req.headers.authorization.substr(7);\n    await magic.token.validate(didToken);\n    res.status(200).json({ authenticated: true });\n  } catch (error) {\n    res.status(500).json({ error: error.message });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}